var ignoreScrollEvents=false;var tabCharacter="  ";if(typeof(Storage)!="Undefined"){var tCn=pi(sessionStorage.getItem("tabCharacter"));if(tCn==0){tabCharacter="\t"}else{if(tCn>0){tabCharacter=""}for(var i=0;i<tCn;i++){tabCharacter+=" "}}}var UnsupportedExt=["jpg","jpeg","png","gif","bmp","svgz","tiff","exif","ico","zip","rar","docx","doc","xls","xlsx","ppt","pptx","pdf","psd","ai"];function _(a){return document.getElementById(a)}function pi(a){return parseInt(a)}function pf(a){return parseFloat(a)}function expandDirectoryViewer(){var a=_("dircontainer").classList;a.add("expanddir");if(typeof(Storage)!="Undefined"){sessionStorage.setItem("dircontainer","expanddir")}}function collapseDirectoryViewer(){var a=_("dircontainer").classList;a.remove("expanddir");if(typeof(Storage)!="Undefined"){sessionStorage.setItem("dircontainer","collapsedir")}}function toggleDirectoryViewer(){if(_("dircontainer").classList.contains("expanddir")){collapseDirectoryViewer()}else{expandDirectoryViewer()}}function togglePreview(){if(_("previewcontainer").classList.contains("expandpreview")){collapsePreview()}else{expandPreview()}}function collapsePreview(){d=_("previewcontainer").classList;d.remove("expandpreview");if(typeof(Storage)!="Undefined"){sessionStorage.setItem("previewcontainer","collapsepreview")}}function expandPreview(){var a=_("previewcontainer").classList;a.add("expandpreview");if(typeof(Storage)!="Undefined"){sessionStorage.setItem("previewcontainer","expandpreview")}}function adjustUI(){if(typeof(Storage)!="Undefined"){var a=sessionStorage.getItem("dircontainer");if(a=="expanddir"){expandDirectoryViewer()}else{collapseDirectoryViewer()}var b=sessionStorage.getItem("previewcontainer");if(b=="expandpreview"){expandPreview()}else{collapsePreview()}}}function loadDirectoryStructure(){var b=_("dirstructure");b.innerHTML="<div class='loading'></div>";var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{a=new ActiveXObject("Microsoft.XMLHTTP")}a.onreadystatechange=function(){if(this.readyState==4){if(this.status==200){_("dirstructure").innerHTML=this.responseText}else{if(this.status==403){b.innerHTML="<div class='accessdenied'></div>"}else{b.innerHTML="<div class='errorloading'></div>"}}}};a.open("POST","functions/getContentsFromDirectory.php");a.send()}function togglefolder(b,a){b.stopPropagation();a.parentNode.parentNode.classList.toggle("showdircontents")}function keypressed(e,b){if(e.keyCode==16||e.which==16){setKey("shift","on")}if(e.keyCode==17||e.which==17){setKey("ctrl","on")}if(e.keyCode==18||e.which==18){e.preventDefault();setKey("alt","on")}if(e.keyCode==83||e.which==83){if(getKey("ctrl")=="on"){e.preventDefault();var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{a=new ActiveXObject("Microsoft.XMLHTTP")}a.onreadystatechange=function(){if(this.readyState==4){if(this.status==200){var f=this.responseText;f=JSON.parse(f);if(f.type=="success"){setMessage(f.type,f.message)}else{setMessage(f.type,f.message)}keychanged(0)}else{setMessage("error","Unknown error")}}};var g=new FormData();g.append("content",_("txt").value);a.open("POST","functions/saveFile.php?url="+_("txt").getAttribute("openedFilePath"));a.send(g)}}if((e.keyCode==219||e.which==219)&&(getKey("shift")=="on")){e.preventDefault();var b=_("txt");var k=0,j=b.selectionStart,c=b.selectionEnd,h="";if(b.value.substring(j-1,j)!="\n"){h="\n{\n"+tabCharacter+"\n}";k=j+3+(tabCharacter.length)}else{h="{\n"+tabCharacter+"\n}";k=j+2+(tabCharacter.length)}b.value=b.value.substring(0,j)+h+b.value.substring(c,b.value.length);b.selectionStart=k;b.selectionEnd=k}if(e.keyCode==9||e.which==9){e.preventDefault();cursor=b.selectionStart;if(getKey("shift")=="off"){b.value=b.value.substring(0,b.selectionStart)+"  "+b.value.substring(b.selectionEnd,b.value.length);b.selectionEnd=cursor+2}else{if(getKey("shift")=="on"){if(b.value.substring(b.selectionStart-1,b.selectionStart)=="\t"){b.value=b.value.substring(0,b.selectionStart-1)+b.value.substring(b.selectionEnd,b.value.length);b.selectionEnd=cursor-1}else{if(b.value.substring(b.selectionStart-(tabCharacter.length),b.selectionStart)==tabCharacter){b.value=b.value.substring(0,b.selectionStart-(tabCharacter.length))+b.value.substring(b.selectionEnd,b.value.length);b.selectionEnd=cursor-(tabCharacter.length)}}}}}if(e.keyCode==70&&getKey("alt")=="on"&&getKey("ctrl")=="on"){_("menuFile").focus()}if(e.keyCode==69&&getKey("alt")=="on"&&getKey("ctrl")=="on"){_("menuEdit").focus()}if(e.keyCode==86&&getKey("alt")=="on"&&getKey("ctrl")=="on"){_("menuView").focus()}if(e.keyCode==73&&getKey("alt")=="on"&&getKey("ctrl")=="on"){_("menuInsert").focus()}keychanged(0)}function scrollAll(b,a){if(ignoreScrollEvents==true){ignoreScrollEvents=false;return}else{ignoreScrollEvents=true;_("num").scrollTop=b.scrollTop}}function release(a){if(a.keyCode==16||a.which==16){setKey("shift","off")}else{if(a.keyCode==17||a.which==17){setKey("ctrl","off")}else{if(a.keyCode==18||a.which==18){setKey("alt","off")}}}}function keychanged(o){var m=_("txt").value;var h=m.split("\n");var a=h.length;var b=_("num").value;var k=b.split("\n");var e=k.length;var f=k[e-2];var l=0;var g=0,j=1;if(f>a){_("num").value="";for(g=0;g<a;){_("num").value+=(++g)+"\n"}}else{for(g=f;g<a;){_("num").value+=(++g)+"\n"}}j=g.toString().length;j=(j<1)?1:j;_("num").cols=j;updateStatus();updatePreview()}function updatePreview(){var b=_("txt");var c=b.getAttribute("openedFileType");if(c==""){return}c=c.toLowerCase();var a=encodeURIComponent(b.value);var e=_("pre");if(c=="html"){e.src="data:text/html;charset=utf-8,"+a}else{if(c=="svg"){e.src="data:image/svg+xml;charset=utf-8,"+a}else{if(c=="txt"){e.src="data:text/plain;charset=utf-8,"+a}else{if(c==""){e.src='data:text/html;charset=utf-8,<html><body style="color:rgb(255,255,255);font-size:18px;text-align:center;padding-top:45px;padding-left:20px;padding-right:20px;">No file opened.<hr style="border-color:rgba(255,255,255,0.2);width:20%;"></body></html>'}else{e.src='data:text/html;charset=utf-8,<html><body style="color:rgb(255,255,255);font-size:18px;text-align:center;padding-top:45px;padding-left:20px;padding-right:20px;">No preview available.<hr style="border-color:rgba(255,255,255,0.2);width:20%;"></body></html>'}}}}}function insertSpanTag(){var a=_("txt");var f=a.selectionStart,b=a.selectionEnd,e=f+15;var c='<span class=""></span>';a.value=a.value.substring(0,f)+c+a.value.substring(b,a.value.length);a.focus();a.selectionStart=e;a.selectionEnd=e;updatePreview()}function insertInput(){var a=_("txt");var f=a.selectionStart,b=a.selectionEnd,e=f+13;var c='<input type="text" value="" placeholder="" class="" />';a.value=a.value.substring(0,f)+c+a.value.substring(b,a.value.length);a.focus();a.selectionStart=e;a.selectionEnd=e+4;updatePreview()}function insertButton(){var a=_("txt");var f=a.selectionStart,b=a.selectionEnd,e=f+42;var c='<button type="button" onclick="" class="">Button</button>';a.value=a.value.substring(0,f)+c+a.value.substring(b,a.value.length);a.focus();a.selectionStart=e;a.selectionEnd=e+6;updatePreview()}function insertTextarea(){var a=_("txt");var f=a.selectionStart,b=a.selectionEnd,e=f+34;var c='<textarea placeholder="" class=""></textarea>';a.value=a.value.substring(0,f)+c+a.value.substring(b,a.value.length);a.focus();a.selectionStart=e;a.selectionEnd=e;updatePreview()}function insertDivTag(){var a=_("txt");var f=a.selectionStart,b=a.selectionEnd,e=f+14;var c='<div class=""></div>';a.value=a.value.substring(0,f)+c+a.value.substring(b,a.value.length);a.focus();a.selectionStart=e;a.selectionEnd=e;updatePreview()}function insertPTag(){var a=_("txt");var f=a.selectionStart,b=a.selectionEnd,e=f+12;var c='<p class=""></p>';a.value=a.value.substring(0,f)+c+a.value.substring(b,a.value.length);a.focus();a.selectionStart=e;a.selectionEnd=e;updatePreview()}function insertAnchorTag(){var a=_("txt");var f=a.selectionStart,b=a.selectionEnd,e=f+9;var c='<a href="url" target="_blank" class="">Link</a>';a.value=a.value.substring(0,f)+c+a.value.substring(b,a.value.length);a.focus();a.selectionStart=e;a.selectionEnd=e+3;updatePreview()}function insertImageTag(){var a=_("txt");var f=a.selectionStart,b=a.selectionEnd,e=f+10;var c='<img src="url" alt="" class=""/>';a.value=a.value.substring(0,f)+c+a.value.substring(b,a.value.length);a.focus();a.selectionStart=e;a.selectionEnd=e+3;updatePreview()}function insertColor(c){var a=_("txt");var f=a.selectionStart,b=a.selectionEnd,e=f+7;a.value=a.value.substring(0,f)+c+a.value.substring(b,a.value.length);a.focus();a.selectionStart=e;a.selectionEnd=e;updatePreview()}function scrollN(){if(ignoreScrollEvents==true){ignoreScrollEvents=false;return}else{ignoreScrollEvents=true;if(_("num").scrollTop>=_("txt").scrollTop){_("txt").scrollTop=_("num").scrollTop;_("num").scrollTop=_("txt").scrollTop}else{_("txt").scrollTop=_("num").scrollTop}}}function setCursor(a){_("txt").selectionStart=parseInt(a)}function setMessage(e,f){var c=document.createElement("P");c.setAttribute("class",e);c.innerHTML=f;var a=document.body;a.insertBefore(c,a.firstChild);setTimeout(function(){c.parentNode.removeChild(c)},3000)}function fontSize(a){var b=16;if(typeof(Storage)!=="undefined"){if(sessionStorage.fontSize){b=parseInt(sessionStorage.fontSize);if(isNaN(b)){return}if(a=="+"){b++}else{if(a=="-"){b--}else{b=16}}if(b<10){alert("Minimum Font size reached");b=10}else{if(b>45){alert("Maximum Font size reached");b=45}}sessionStorage.fontSize=b}else{sessionStorage.fontSize=16}b=sessionStorage.fontSize}_("txt").style.fontSize=b+"px";_("num").style.fontSize=b+"px"}function updateStatus(){var e=parseInt(_("txt").value.length);var a="";var c=[" B"," KB"," MB"," GB"," TB"," PB"," EB"," ZB"," YB"];var b=0;if(e<=1024){a=e}while(e>1024){b++;e/=1024;a=e.toFixed(2)}if(b<9){a+=c[b]}else{a="Too Large"}_("fsize").innerHTML=a;_("fsizeb").innerHTML=_("txt").value.length+" B"}function openfile(b){var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{a=new ActiveXObject("Microsoft.XMLHTTP")}a.onreadystatechange=function(){if(this.readyState==4){if(this.status==200){var c=this.responseText;c=JSON.parse(c);if(c.type=="success"){_("txt").setAttribute("openedFilePath",b);_("txt").innerHTML=c.message;_("fname").innerHTML=c.filename;_("fpath").innerHTML=c.filepath;_("ftype").innerHTML=c.filetype;_("fext").innerHTML=c.fileext;_("fmd").innerHTML=c.filemodifieddate;_("fpropertyread").innerHTML=(c.filepropertyread=="r")?"Allowed":"Denied";_("fpropertywrite").innerHTML=(c.filepropertywrite=="w")?"Allowed":"Denied";_("fpropertyexecute").innerHTML=(c.filepropertyexecute=="x")?"Yes":"No";_("txt").setAttribute("openedFileType",c.fileext);document.title="Editor : "+c.filename;collapseDirectoryViewer();expandPreview()}else{setMessage(c.type,c.message)}keychanged(0)}else{setMessage("error","Unknown error")}}};a.open("POST","functions/readFile.php?url="+b);a.send()}function adjustNumberLine(){_("num").innerHTML="1\n"}function setKey(a,b){document.body.setAttribute(a+"-key",b)}function getKey(a){return document.body.getAttribute(a+"-key")}function outOfRange(){var a=document.body.classList;a.add("outofrange")}function inRange(){var a=document.body.classList;a.remove("outofrange")};